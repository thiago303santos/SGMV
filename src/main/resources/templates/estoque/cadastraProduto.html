<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_head :: head}"></head>
<body class="has-navbar">

<div th:replace="~{fragments/_navbar :: navbar(${notificacoes}, ${usuarioNome})}"></div>

<div class="container mt-4">
    
    <h2 class="fw-bold mb-4 pb-2 border-bottom text-primary">
        <i class="bi bi-box-seam-fill me-2"></i> Cadastrar Novo Produto
    </h2>

    <form th:action="@{/estoque/salvar}" th:object="${produto}" method="post" class="row g-4">
        
        <input type="hidden" th:field="*{idProduto}"/>

        <div class="col-md-6">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-primary text-white">
                    <i class="bi bi-tag-fill me-1"></i> 1. Identificação e Dados Gerais
                </div>
                <div class="card-body row g-3">
                    
                    <div class="col-12">
                        <label class="form-label fw-semibold">Nome do Produto</label>
                        <input type="text" class="form-control" th:field="*{nomeProduto}" placeholder="Digite o nome do produto" required>
                        <div class="text-danger" th:errors="*{nomeProduto}"></div>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Fabricante</label>
                        <input type="text" class="form-control" th:field="*{fabricante}" placeholder="Fabricante">
                        <div class="text-danger" th:errors="*{fabricante}"></div>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Categoria</label>
                        <select class="form-select" th:field="*{categoria}">
                            <option value="">Selecione...</option>
                            <option th:each="c : ${categorias}" 
                                    th:value="${c.idCategoria}" 
                                    th:text="${c.nomeCategoria}"></option>
                        </select>
                        </div>

                    <div class="col-md-6">
                        <label class="form-label">Código de Barras</label>
                        <input type="text" class="form-control" th:field="*{codigoBarras}" placeholder="Código de barras do produto">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Número de Série</label>
                        <input type="text" class="form-control" th:field="*{numeroSerie}">
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-success text-white">
                    <i class="bi bi-cash-stack me-1"></i> 2. Estoque e Valores
                </div>
                <div class="card-body row g-3">
                    
                    <div class="col-md-4">
                        <label class="form-label fw-semibold">Quantidade em Estoque</label>
                        <input type="number" class="form-control" th:field="*{quantidade}" min="0" required>
                    </div>

                    <div class="col-md-8">
                        <label class="form-label fw-semibold">Unidade de Medida</label>
                        <select class="form-select" th:field="*{unidadeMedida}" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option th:each="um : ${T(sgmv.demo.model.enums.UnidadeMedida).values()}"
                                    th:value="${um.name()}"
                                    th:text="${um.sigla} + ' (' + ${um.name()} + ')'">
                            </option>
                        </select>
                        <div class="text-danger" th:errors="*{unidadeMedida}"></div>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-danger">Valor de Custo (R$)</label>
                        <input type="number" step="0.01" class="form-control" th:field="*{valorCusto}" placeholder="0.00">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label fw-semibold text-success">Valor de Venda (R$)</label>
                        <input type="number" step="0.01" class="form-control" th:field="*{valorVenda}" placeholder="0.00" required>
                    </div>

                    <div class="col-md-4 mt-4">
                        <label class="form-label fw-semibold d-block">Perecível?</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" th:field="*{perecivel}" id="switchPerecivel">
                            <label class="form-check-label" for="switchPerecivel">Sim</label>
                        </div>
                    </div>

                    <div class="col-md-8 mt-4">
                        <label class="form-label fw-semibold">Data de Validade</label>
                        <input type="date" class="form-control" th:field="*{dataValidade}">
                        <small class="text-muted">Necessário se o produto for perecível.</small>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 mt-4 pt-3 border-top text-end">
            <a th:href="@{/estoque/lista}" class="btn btn-outline-secondary btn-lg me-2">
                <i class="bi bi-x-lg me-1"></i> Cancelar
            </a>
            <button type="submit" class="btn btn-success btn-lg shadow">
                <i class="bi bi-save-fill me-1"></i> Salvar Produto
            </button>
        </div>
    </form>
</div>


<div th:replace="~{fragments/_scripts :: scripts}"></div>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</body>
</html>