<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_head :: head}"></head>
<body class="has-navbar">

<!-- Navbar -->
<div th:replace="~{fragments/_navbar :: navbar(${notificacoes}, ${usuarioNome})}"></div>

<div class="container mt-5">
    <h2 class="mb-4">Cadastrar Novo Produto</h2>

    <form th:action="@{/estoque/salvar}" th:object="${produto}" method="post" class="row g-3">

        <!-- Nome do Produto -->
        <div class="col-md-6">
            <label class="form-label">Nome do Produto</label>
            <input type="text" class="form-control" th:field="*{nomeProduto}" placeholder="Digite o nome do produto">
            <div class="text-danger" th:errors="*{nomeProduto}"></div>
        </div>

        <!-- Fabricante -->
        <div class="col-md-6">
            <label class="form-label">Fabricante</label>
            <input type="text" class="form-control" th:field="*{fabricante}" placeholder="Fabricante">
            <div class="text-danger" th:errors="*{fabricante}"></div>
        </div>

        <!-- Código de Barras -->
        <div class="col-md-6">
            <label class="form-label">Código de Barras</label>
            <input type="text" class="form-control" th:field="*{codigoBarras}" placeholder="Código de barras do produto">
        </div>

        <!-- Número de Série -->
        <div class="col-md-6">
            <label class="form-label">Número de Série</label>
            <input type="text" class="form-control" th:field="*{numeroSerie}">
        </div>

        <!-- Quantidade -->
        <div class="col-md-3">
            <label class="form-label">Quantidade</label>
            <input type="number" class="form-control" th:field="*{quantidade}" min="0">
        </div>

        <!-- Unidade de Medida -->
        <div class="col-md-4">
            <label class="form-label fw-semibold">Unidade de Medida</label>
            <select class="form-select" th:field="*{unidadeMedida}">
                <option value="" disabled selected>Selecione...</option>
                <option th:each="um : ${T(sgmv.demo.model.enums.UnidadeMedida).values()}"
                        th:value="${um.name()}"
                        th:text="${um.sigla}">
                </option>
            </select>
            <div class="text-danger" th:if="${#fields.hasErrors('unidadeMedida')}" 
                 th:each="err : ${#fields.errors('unidadeMedida')}" th:text="${err}"></div>
        </div>

        <!-- Valor Custo -->
        <div class="col-md-3">
            <label class="form-label">Valor de Custo (R$)</label>
            <input type="number" step="0.01" class="form-control" th:field="*{valorCusto}">
        </div>

        <!-- Valor Venda -->
        <div class="col-md-3">
            <label class="form-label">Valor de Venda (R$)</label>
            <input type="number" step="0.01" class="form-control" th:field="*{valorVenda}">
        </div>

        <!-- Categoria -->
        <div class="col-md-6">
            <label class="form-label">Categoria</label>
            <select class="form-select" th:field="*{categoria}">
                <option value="">Selecione...</option>
                <option th:each="c : ${categorias}" 
                        th:value="${c.idCategoria}" 
                        th:text="${c.nomeCategoria}"></option>
            </select>
        </div>

        <!-- Perecível -->
        <div class="col-md-3">
            <label class="form-label d-block">Perecível</label>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" th:field="*{perecivel}">
                <label class="form-check-label">Sim</label>
            </div>
        </div>

        <!-- Data de Validade -->
        <div class="col-md-3">
            <label class="form-label">Data de Validade</label>
            <input type="date" class="form-control" th:field="*{dataValidade}">
        </div>

        <!-- Botões -->
        <div class="col-12 mt-4">
            <button type="submit" class="btn btn-success btn-lg">
                <i class="bi bi-save me-1"></i> Salvar Produto
            </button>
            <a th:href="@{/estoque/lista}" class="btn btn-secondary btn-lg">
                <i class="bi bi-arrow-left-circle me-1"></i> Cancelar
            </a>
        </div>

    </form>
</div>


<!-- Scripts -->
<div th:replace="~{fragments/_scripts :: scripts}"></div>
</body>
</html>
